import{w as h,p as s}from"./index-NuNN0iCq.js";import{g as f,c as w}from"./session-DDv_qSEA.js";import{D as g}from"./DeploymentCard-1vU0DvIL.js";import{aa as y}from"./index-G35MBPhY.js";import"./Button-CEl3aF_e.js";import"./index-DBMMbDi6.js";import"./client-C7kaaLyT.js";import"./index-B7_R92Dw.js";const j="/_golf";async function k({url:t,method:o,body:e,headers:r,pathParams:i,queryParams:p,signal:d}){let c;try{const n=f();n||(console.warn("no auth token found, redirecting home"),window.location.href="/");const l={"Content-Type":"application/json",...{Authorization:`Bearer ${n}`},...r};l["Content-Type"]?.toLowerCase().includes("multipart/form-data")&&delete l["Content-Type"];const a=await window.fetch(`${j}${x(t,p,i)}`,{signal:d,method:o.toUpperCase(),body:e?e instanceof FormData?e:JSON.stringify(e):void 0,headers:l});if(a.ok)return a.headers.get("content-type")?.includes("json")?await a.json():await a.blob();a.status===401&&(console.warn("got 401 response, erasing token and redirecting home"),w(),window.location.href="/");try{c=await a.json()}catch(m){c={status:"unknown",payload:m instanceof Error?`Unexpected error (${m.message})`:"Unexpected error"}}}catch(n){throw{name:"unknown",message:n instanceof Error?`Network error (${n.message})`:"Network error",stack:n}}throw c}const x=(t,o={},e={})=>{let r=new URLSearchParams(o).toString();return r&&(r=`?${r}`),t.replace(/\{\w*\}/g,i=>e[i.slice(1,-1)]??"")+r},T=t=>k({url:"/deployments",method:"get",signal:t});function b({}){return[{title:"Deployments"}]}async function A(){return await T()}const E=h(function({loaderData:{deployments:o}}){return o?.length?s.jsxs(s.Fragment,{children:[s.jsx(y.Title,{level:2,children:"Deployments"}),s.jsx("div",{className:"grid gap-8 w-full grid-cols-1 md:grid-cols-2",children:o?.map(e=>s.jsx(g,{deployment:e},e.url))})]}):s.jsx("div",{children:"You have no deployments yet!"})});export{A as clientLoader,E as default,b as meta};
