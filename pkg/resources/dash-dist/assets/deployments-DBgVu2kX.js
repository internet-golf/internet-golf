import{w as f,p as l}from"./index-NuNN0iCq.js";import{g as h,c as w}from"./session-DDv_qSEA.js";import{D as g}from"./DeploymentCard-Cj5NO4dD.js";import"./index-G35MBPhY.js";import"./index-DBMMbDi6.js";import"./Button-CEl3aF_e.js";import"./client-C7kaaLyT.js";import"./index-B7_R92Dw.js";const y="/_golf";async function k({url:t,method:o,body:e,headers:r,pathParams:s,queryParams:p,signal:d}){let i;try{const n=h();n||(console.warn("no auth token found, redirecting home"),window.location.href="/");const c={"Content-Type":"application/json",...{Authorization:`Bearer ${n}`},...r};c["Content-Type"]?.toLowerCase().includes("multipart/form-data")&&delete c["Content-Type"];const a=await window.fetch(`${y}${j(t,p,s)}`,{signal:d,method:o.toUpperCase(),body:e?e instanceof FormData?e:JSON.stringify(e):void 0,headers:c});if(a.ok)return a.headers.get("content-type")?.includes("json")?await a.json():await a.blob();a.status===401&&(console.warn("got 401 response, erasing token and redirecting home"),w(),window.location.href="/");try{i=await a.json()}catch(m){i={status:"unknown",payload:m instanceof Error?`Unexpected error (${m.message})`:"Unexpected error"}}}catch(n){throw{name:"unknown",message:n instanceof Error?`Network error (${n.message})`:"Network error",stack:n}}throw i}const j=(t,o={},e={})=>{let r=new URLSearchParams(o).toString();return r&&(r=`?${r}`),t.replace(/\{\w*\}/g,s=>e[s.slice(1,-1)]??"")+r},x=t=>k({url:"/deployments",method:"get",signal:t});function O({}){return[{title:"Deployments"}]}async function b(){return await x()}const A=f(function({loaderData:{deployments:o}}){return o?.length?l.jsx("div",{className:"grid gap-8 w-full grid-cols-1 md:grid-cols-2",children:o?.map(e=>l.jsx(g,{deployment:e},e.url))}):l.jsx("div",{children:"You have no deployments yet!"})});export{b as clientLoader,A as default,O as meta};
